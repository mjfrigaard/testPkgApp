)
chr_tbl <- col_maker(col_type = "chr", size = 10, missing = FALSE)
testthat::expect_equal(
object = pull_numeric_cols(chr_tbl),
expected = NULL
)
})
testthat::test_that("pull_numeric_cols() helpers data", {
fct_tbl <- col_maker(col_type = "fct", size = 10, missing = FALSE)
# test factor columns
testthat::expect_equal(
object = pull_numeric_cols(fct_tbl),
expected = NULL
)
# test character columns
chr_tbl <- col_maker(col_type = "chr", size = 10, missing = FALSE)
testthat::expect_equal(
object = pull_numeric_cols(chr_tbl),
expected = NULL
)
})
testthat::test_that("pull_numeric_cols() helpers data", {
fct_tbl <- col_maker(col_type = "fct", size = 10, missing = FALSE)
# test factor columns
testthat::expect_equal(
object = expect_null(fct_tbl)
)
# test character columns
chr_tbl <- col_maker(col_type = "chr", size = 10, missing = FALSE)
testthat::expect_null(
object = pull_numeric_cols(chr_tbl)
)
})
testthat::test_that("pull_numeric_cols() helpers data", {
fct_tbl <- col_maker(col_type = "fct", size = 10, missing = FALSE)
# test factor columns
testthat::expect_null(
object = pull_numeric_cols(fct_tbl)
)
# test character columns
chr_tbl <- col_maker(col_type = "chr", size = 10, missing = FALSE)
testthat::expect_null(
object = pull_numeric_cols(chr_tbl)
)
})
testthat::test_that("pull_numeric_cols() helpers data", {
fct_tbl <- col_maker(col_type = "fct", size = 10, missing = FALSE)
# test factor columns
testthat::expect_null(
object = pull_numeric_cols(fct_tbl)
)
ord_tbl <- col_maker(col_type = "ord", size = 10, missing = FALSE)
testthat::expect_null(
object = pull_numeric_cols(ord_tbl)
)
# test character columns
chr_tbl <- col_maker(col_type = "chr", size = 10, missing = FALSE)
testthat::expect_null(
object = pull_numeric_cols(chr_tbl)
)
})
testthat::test_that("pull_numeric_cols() helpers data", {
log_tbl <- col_maker(col_type = "fct", size = 10, missing = FALSE)
# test logical columns
testthat::expect_null(
object = pull_numeric_cols(log_tbl)
)
fct_tbl <- col_maker(col_type = "fct", size = 10, missing = FALSE)
# test factor columns
testthat::expect_null(
object = pull_numeric_cols(fct_tbl)
)
ord_tbl <- col_maker(col_type = "ord", size = 10, missing = FALSE)
testthat::expect_null(
object = pull_numeric_cols(ord_tbl)
)
# test character columns
chr_tbl <- col_maker(col_type = "chr", size = 10, missing = FALSE)
testthat::expect_null(
object = pull_numeric_cols(chr_tbl)
)
})
testthat::test_that("pull_numeric_cols() helpers data", {
log_tbl <- col_maker(col_type = "fct", size = 10, missing = FALSE)
# test logical columns
testthat::expect_null(
object = pull_numeric_cols(log_tbl)
)
# test character columns
chr_tbl <- col_maker(col_type = "chr", size = 10, missing = FALSE)
testthat::expect_null(
object = pull_numeric_cols(chr_tbl)
)
fct_tbl <- col_maker(col_type = "fct", size = 10, missing = FALSE)
# test factor columns
testthat::expect_null(
object = pull_numeric_cols(fct_tbl)
)
ord_tbl <- col_maker(col_type = "ord", size = 10, missing = FALSE)
testthat::expect_null(
object = pull_numeric_cols(ord_tbl)
)
})
testthat::test_that("pull_cat_cols() helpers data", {
log_tbl <- col_maker(col_type = "log", size = 10, missing = FALSE)
# test logical columns
testthat::expect_null(
object = pull_cat_cols(log_tbl)
)
int_tbl <- col_maker(col_type = "int", size = 10, missing = FALSE)
# test integer columns
testthat::expect_null(
object = pull_cat_cols(int_tbl)
)
# test double columns
dbl_tbl <- col_maker(col_type = "dbl", size = 10, missing = FALSE)
testthat::expect_null(
object = pull_cat_cols(dbl_col)
)
})
devtools::load_all(".")
library(utap)
source("~/projects/apps/utap/tests/testthat/helper.R")
testthat::test_that("pull_cat_cols() helpers data", {
log_tbl <- col_maker(col_type = "log", size = 10, missing = FALSE)
# test logical columns
testthat::expect_null(
object = pull_cat_cols(log_tbl)
)
int_tbl <- col_maker(col_type = "int", size = 10, missing = FALSE)
# test integer columns
testthat::expect_null(
object = pull_cat_cols(int_tbl)
)
# test double columns
dbl_tbl <- col_maker(col_type = "dbl", size = 10, missing = FALSE)
testthat::expect_null(
object = pull_cat_cols(dbl_col)
)
})
testthat::test_that("pull_cat_cols() helpers data", {
log_tbl <- col_maker(col_type = "log", size = 10, missing = FALSE)
# test logical columns
testthat::expect_null(
object = pull_cat_cols(log_tbl)
)
int_tbl <- col_maker(col_type = "int", size = 10, missing = FALSE)
# test integer columns
testthat::expect_null(
object = pull_cat_cols(int_tbl)
)
# test double columns
dbl_tbl <- col_maker(col_type = "dbl", size = 10, missing = FALSE)
testthat::expect_null(
object = pull_cat_cols(dbl_col)
)
})
log_tbl <- col_maker(col_type = "log", size = 10, missing = FALSE)
pull_cat_cols(log_tbl)
int_tbl <- col_maker(col_type = "int", size = 10, missing = FALSE)
pull_cat_cols(int_tbl)
# test double columns
dbl_tbl <- col_maker(col_type = "dbl", size = 10, missing = FALSE)
pull_cat_cols(dbl_col)
get_column_class(dbl_col)
source("~/projects/apps/utap/R/pull_cat_cols.R")
source("~/projects/apps/utap/tests/testthat/helper.R")
source("~/projects/apps/utap/R/pull_cat_cols.R")
bins_facets_list
bins_facets
chrs
chrs_fcts_list
cats_nms
devtools::load_all(".")
library(utap)
source("~/projects/apps/utap/tests/testthat/helper.R")
testthat::test_that("pull_cat_cols() helpers data", {
log_tbl <- col_maker(col_type = "log", size = 10, missing = FALSE)
# test logical columns
testthat::expect_null(
object = pull_cat_cols(log_tbl)
)
int_tbl <- col_maker(col_type = "int", size = 10, missing = FALSE)
# test integer columns
testthat::expect_null(
object = pull_cat_cols(int_tbl)
)
# # test double columns
# dbl_tbl <- col_maker(col_type = "dbl", size = 10, missing = FALSE)
# testthat::expect_null(
#   object = pull_cat_cols(dbl_col)
# )
})
testthat::test_that("pull_cat_cols() helpers data", {
log_tbl <- col_maker(col_type = "log", size = 10, missing = FALSE)
# test logical columns
testthat::expect_null(
object = pull_cat_cols(log_tbl)
)
int_tbl <- col_maker(col_type = "int", size = 10, missing = FALSE)
# test integer columns
testthat::expect_null(
object = pull_cat_cols(int_tbl)
)
# test double columns
dbl_tbl <- col_maker(col_type = "dbl", size = 10, missing = FALSE)
testthat::expect_null(
object = pull_cat_cols(dbl_col)
)
})
dbl_tbl <- col_maker(col_type = "dbl", size = 10, missing = FALSE)
pull_cat_cols(dbl_tbl)
source("~/projects/apps/utap/R/pull_cat_cols.R")
#' @return character and factor column names
#' @export pull_cat_cols
#'
#' @importFrom purrr compact list_c set_names
#'
#' @examples
#' require(palmerpenguins)
#' require(dplyr)
#' pull_cat_cols(palmerpenguins::penguins)
#' pull_cat_cols(dplyr::starwars)
pull_cat_cols <- function(df) {
# characters
chrs <- get_column_class(df = df, class = "chr", return_tbl = FALSE)
# factors
fcts <- get_column_class(df = df, class = "fct", return_tbl = FALSE)
# assemble
all_chrs_fcts_list <- list(chrs, fcts)
# reduce
chrs_fcts_list <- purrr::compact(all_chrs_fcts_list)
# vector
chrs_fcts <- purrr::list_c(chrs_fcts_list)
# reduce
cats_nms <- chrs_fcts[chrs_fcts %nin% bins_facets]
if (is.null(cats_nms)) {
return(cats_nms)
} else {
# name
cats <- purrr::set_names(cats_nms)
return(cats)
}
dbl_tbl <- col_maker(col_type = "dbl", size = 10, missing = FALSE)
pull_cat_cols(dbl_tbl)
#' @return character and factor column names
#' @export pull_cat_cols
#'
#' @importFrom purrr compact list_c set_names
#'
#' @examples
#' require(palmerpenguins)
#' require(dplyr)
#' pull_cat_cols(palmerpenguins::penguins)
#' pull_cat_cols(dplyr::starwars)
pull_cat_cols <- function(df) {
# characters
chrs <- get_column_class(df = df, class = "chr", return_tbl = FALSE)
# factors
fcts <- get_column_class(df = df, class = "fct", return_tbl = FALSE)
# assemble
all_chrs_fcts_list <- list(chrs, fcts)
# reduce
chrs_fcts_list <- purrr::compact(all_chrs_fcts_list)
# vector
chrs_fcts <- purrr::list_c(chrs_fcts_list)
if (is.null(chrs_fcts)) {
return(chrs_fcts)
} else {
# name
cats <- purrr::set_names(chrs_fcts)
return(cats)
}
dbl_tbl <- col_maker(col_type = "dbl", size = 10, missing = FALSE)
pull_cat_cols(dbl_tbl)
devtools::load_all(".")
library(utap)
testthat::test_that("pull_cat_cols() helpers data", {
log_tbl <- col_maker(col_type = "log", size = 10, missing = FALSE)
# test logical columns
testthat::expect_null(
object = pull_cat_cols(log_tbl)
)
int_tbl <- col_maker(col_type = "int", size = 10, missing = FALSE)
# test integer columns
testthat::expect_null(
object = pull_cat_cols(int_tbl)
)
# test double columns
dbl_tbl <- col_maker(col_type = "dbl", size = 10, missing = FALSE)
testthat::expect_null(
object = pull_cat_cols(dbl_col)
)
})
source("~/projects/apps/utap/tests/testthat/helper.R")
testthat::test_that("pull_cat_cols() helpers data", {
log_tbl <- col_maker(col_type = "log", size = 10, missing = FALSE)
# test logical columns
testthat::expect_null(
object = pull_cat_cols(log_tbl)
)
int_tbl <- col_maker(col_type = "int", size = 10, missing = FALSE)
# test integer columns
testthat::expect_null(
object = pull_cat_cols(int_tbl)
)
# test double columns
dbl_tbl <- col_maker(col_type = "dbl", size = 10, missing = FALSE)
testthat::expect_null(
object = pull_cat_cols(dbl_col)
)
})
get_column_class(df = col_maker(col_type = "dbl", size = 10, missing = FALSE), class = "chr", return_tbl = FALSE)
testthat::test_that("pull_cat_cols() helpers data", {
log_tbl <- col_maker(col_type = "log", size = 10, missing = FALSE)
# test logical columns
testthat::expect_null(
object = pull_cat_cols(log_tbl)
)
int_tbl <- col_maker(col_type = "int", size = 10, missing = FALSE)
# test integer columns
testthat::expect_null(
object = pull_cat_cols(int_tbl)
)
# # test double columns
# dbl_tbl <- col_maker(col_type = "dbl", size = 10, missing = FALSE)
# testthat::expect_null(
#   object = pull_cat_cols(dbl_col)
# )
})
pull_cat_cols(dbl_col)
rlang::last_trace()
rlang::last_trace(drop = FALSE)
select_column_class(col_maker(col_type = "dbl", size = 10, missing = FALSE), class = "double")
select_column_class(col_maker(col_type = "dbl", size = 10, missing = FALSE), class = "dbl")
get_column_class(col_maker(col_type = "dbl", size = 10, missing = FALSE), class = "chr")
get_column_class(col_maker(col_type = "dbl", size = 10, missing = FALSE), class = "chr", return_tbl = FALSE)
source("~/projects/apps/utap/R/pull_cat_cols.R")
chrs
all_chrs_fcts_list
chrs_fcts_list
chrs_fcts
source("~/projects/apps/utap/R/pull_cat_cols.R")
pull_cat_cols(col_maker(col_type = c("dbl",
"chr"), size = 10, missing = FALSE))
pull_cat_cols(col_maker(col_type = c("dbl"), size = 10, missing = FALSE))
devtools::load_all(".")
library(utap)
testthat::test_that("pull_cat_cols() helpers data", {
log_tbl <- col_maker(col_type = "log", size = 10, missing = FALSE)
# test logical columns
testthat::expect_null(
object = pull_cat_cols(log_tbl)
)
int_tbl <- col_maker(col_type = "int", size = 10, missing = FALSE)
# test integer columns
testthat::expect_null(
object = pull_cat_cols(int_tbl)
)
# test double columns
dbl_tbl <- col_maker(col_type = "dbl", size = 10, missing = FALSE)
testthat::expect_null(
object = pull_cat_cols(dbl_col)
)
})
source("~/projects/apps/utap/tests/testthat/helper.R")
testthat::test_that("pull_cat_cols() helpers data", {
log_tbl <- col_maker(col_type = "log", size = 10, missing = FALSE)
# test logical columns
testthat::expect_null(
object = pull_cat_cols(log_tbl)
)
int_tbl <- col_maker(col_type = "int", size = 10, missing = FALSE)
# test integer columns
testthat::expect_null(
object = pull_cat_cols(int_tbl)
)
# test double columns
dbl_tbl <- col_maker(col_type = "dbl", size = 10, missing = FALSE)
testthat::expect_null(
object = pull_cat_cols(dbl_col)
)
})
testthat::test_that("pull_cat_cols() helpers data", {
log_tbl <- col_maker(col_type = "log", size = 10, missing = FALSE)
# test logical columns
testthat::expect_null(
object = pull_cat_cols(log_tbl)
)
int_tbl <- col_maker(col_type = "int", size = 10, missing = FALSE)
# test integer columns
testthat::expect_null(
object = pull_cat_cols(int_tbl)
)
# test double columns
dbl_tbl <- col_maker(col_type = "dbl", size = 10, missing = FALSE)
testthat::expect_null(
object = pull_cat_cols(dbl_tbl)
)
})
devtools::load_all(".")
library(utap)
testthat::test_that("pull_cat_cols() helpers data", {
log_tbl <- col_maker(col_type = "log", size = 10, missing = FALSE)
# test logical columns
testthat::expect_null(
object = pull_cat_cols(log_tbl)
)
int_tbl <- col_maker(col_type = "int", size = 10, missing = FALSE)
# test integer columns
testthat::expect_null(
object = pull_cat_cols(int_tbl)
)
# test double columns
dbl_tbl <- col_maker(col_type = "dbl", size = 10, missing = FALSE)
testthat::expect_null(
object = pull_cat_cols(dbl_tbl)
)
})
null_tbl <- col_maker(col_type = c("log", "int", "dbl"),
size = 10,
missing = FALSE)
testthat::test_that("pull_cat_cols() helpers data", {
null_tbl <- col_maker(col_type = c("log", "int", "dbl"),
size = 10,
missing = FALSE)
# test logical columns
testthat::expect_null(
object = pull_cat_cols(null_tbl)
)
# test integer columns
testthat::expect_null(
object = pull_cat_cols(null_tbl)
)
# test double columns
testthat::expect_null(
object = pull_cat_cols(null_tbl)
)
})
null_tbl <- col_maker(col_type = c("log", "chr", "fct",  "ord"), size = 10,
missing = FALSE)
testthat::test_that("pull_numeric_cols() helpers data", {
null_tbl <- col_maker(col_type = c("log", "chr", "fct",  "ord"), size = 10,
missing = FALSE)
# test logical columns
testthat::expect_null(
object = pull_numeric_cols(null_tbl)
)
# test character columns
testthat::expect_null(
object = pull_numeric_cols(null_tbl)
)
# test factor columns
testthat::expect_null(
object = pull_numeric_cols(null_tbl)
)
testthat::expect_null(
object = pull_numeric_cols(null_tbl)
)
})
test_that("check_facet_vec() character", {
# test character (5 unique values)
chr_test <- check_facet_vec(x =
chr_maker(size = 10, lvls = 5),
type = "chr")
expect_equal(object = chr_test,
expected = TRUE)
# test character (5 unique values, missing)
chr_test <- check_facet_vec(x =
chr_maker(
size = 10,
lvls = 5,
missing = TRUE
),
type = "chr")
expect_equal(object = chr_test,
expected = TRUE)
# test character (6 unique values)
chr_test <- check_facet_vec(x =
chr_maker(size = 10, lvls = 6),
type = "chr")
expect_equal(object = chr_test,
expected = FALSE)
# test character (6 unique values, missing)
chr_test <- check_facet_vec(x =
chr_maker(
size = 10,
lvls = 6,
missing = TRUE
),
type = "chr")
expect_equal(object = chr_test,
expected = FALSE)
})
fs::dir_tree("R")
fs::dir_tree("tests")
fs::dir_tree("tests/testthat/")
fs::dir_tree("tests/testthat/", recurse = FALSE)
covr::report()
installed.packages("covr")
renv::install("covr")
library(covr)
covr::report()
renv::install("DT")
installed.packages("htmltools")
renv::install("htmltools")
covr::report()
devtools::load_all(".")
library(utap)
renv::status()
renv::snapshot()
covr::report()
